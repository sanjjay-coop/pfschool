<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments :: html_head}">
</head>
<body>
	<div class="container text-center" th:replace="~{fragments :: header}">
		
	</div>
	
	<div class="container-fluid">
		<div class="row px-4 py-2">

			<div class="col-12">
			
				<h4 class="h4 pb-3" th:text="'Attendance Register'"></h4>
				
				<div class="alert alert-warning" role="alert" th:text="${message}" th:if="${message != null }"></div>
				
				<div class="row pb-3">
					<div class="col-12">
						<div class="d-grid gap-2 d-md-block">
							<a class="btn btn-primary btn-sm" role="button" th:href="@{/dashboard/class/student/list/{orderId}(orderId=${sessionDetailId})}">&lt;&lt; Back To Session Details</a>
						</div>
					</div>
				</div>
				<div class="row pb-3">
					<div class="col-12 text-center h5" th:text="${student.name}">
						
					</div>
				</div>
				<div class="row pb-3">
					<div class="col-2 text-start">
						<div class="d-grid gap-2 d-md-block">
							<a class="btn btn-tertiary btn-sm" role="button" 
								th:href="@{/dashboard/class/student/attendance/{orderId}/{orderId1}/{orderId2}(orderId=${student.id}, orderId1=${previousMonth}, orderId2=${previousYear})}">&lt;&lt; Previous Month</a>
						</div>
					</div>
					<div class="col-8 text-center" th:text="${#dates.monthName(date)} + ', ' + ${#dates.year(date)}">
						
					</div>
					<div class="col-2 text-end">
						<div class="d-grid gap-2 d-md-block">
							<a class="btn btn-tertiary btn-sm" role="button" 
								th:href="@{/dashboard/class/student/attendance/{orderId}/{orderId1}/{orderId2}(orderId=${student.id}, orderId1=${nextMonth}, orderId2=${nextYear})}">Next Month &gt;&gt;</a>
						</div>
					</div>
				</div>
				<table class="table table-sm small table-bordered table-striped">
					<thead>
						<tr>
							<th class="col-sm-1 text-center" th:text="Sun"></th>
							<th class="col-sm-1 text-center" th:text="Mom"></th>
							<th class="col-sm-1 text-center" th:text="Tue"></th>
							<th class="col-sm-1 text-center" th:text="Wed"></th>
							<th class="col-sm-1 text-center" th:text="Thu"></th>
							<th class="col-sm-1 text-center" th:text="Fri"></th>
							<th class="col-sm-1 text-center" th:text="Sat"></th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="row,rowIterator : ${data}">
							<td class="text-center" th:each="col,colIterator : ${row}">
								<span class="text-center" th:utext="${data[__${rowIterator.index}__][__${colIterator.index}__]}"
									th:classappend="${#strings.contains(data[__${rowIterator.index}__][__${colIterator.index}__], 'Present')} ? 'text-success' : 
									(${#strings.contains(data[__${rowIterator.index}__][__${colIterator.index}__], 'Absent')} ? 'text-danger' : 
									(${#strings.contains(data[__${rowIterator.index}__][__${colIterator.index}__], 'Late')} ? 'text-warning' :
									(${#strings.contains(data[__${rowIterator.index}__][__${colIterator.index}__], 'Leave')} ? 'text-primary')))" 
									th:if="${not #strings.isEmpty(data[__${rowIterator.index}__][__${colIterator.index}__])}"
								></span>
								<span class="text-center" th:utext="${data[__${rowIterator.index}__][__${colIterator.index}__]}"
									th:if="${#strings.isEmpty(data[__${rowIterator.index}__][__${colIterator.index}__])}"
								></span>
							</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
	</div>
	
	<div class="container" th:replace="~{fragments :: footer}">
	</div>
</body>	
</html>